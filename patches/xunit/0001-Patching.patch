From 1ff5aac895a9d623a2a7442517dc142de6691001 Mon Sep 17 00:00:00 2001
From: Matt Mitchell <mmitche@microsoft.com>
Date: Wed, 21 Jun 2023 15:36:27 -0700
Subject: [PATCH] Patching

---
 global.json                                         |  5 -----
 src/Directory.Build.props                           |  7 ++-----
 src/xunit.assert/xunit.assert.csproj                | 13 +------------
 src/xunit.core/xunit.core.csproj                    |  3 ++-
 src/xunit.execution/xunit.execution.csproj          |  2 +-
 .../xunit.runner.assemblies.csproj                  |  2 +-
 .../xunit.runner.utility.csproj                     |  5 +++--
 xunit-notests.slnf                                  |  9 +++++++++
 8 files changed, 19 insertions(+), 27 deletions(-)
 delete mode 100644 global.json
 create mode 100644 xunit-notests.slnf

diff --git a/global.json b/global.json
deleted file mode 100644
index ebd1966e..00000000
--- a/global.json
+++ /dev/null
@@ -1,5 +0,0 @@
-{
-  "msbuild-sdks": {
-    "MSBuild.Sdk.Extras": "3.0.38"
-  }
-}
diff --git a/src/Directory.Build.props b/src/Directory.Build.props
index 95cabfab..4e1bce0c 100644
--- a/src/Directory.Build.props
+++ b/src/Directory.Build.props
@@ -22,6 +22,7 @@
     <TargetPlatformMinVersion Condition=" '$(TargetFramework)' == 'uap10.0' ">10.0.16299.0</TargetPlatformMinVersion>
     <TargetPlatformVersion Condition=" '$(TargetFramework)' == 'uap10.0' ">10.0.19041.0</TargetPlatformVersion>
     <WarningsAsErrors>true</WarningsAsErrors>
+    <Version>$(PackageVersion)</Version>
   </PropertyGroup>
 
   <ItemGroup>
@@ -29,11 +30,7 @@
   </ItemGroup>
 
   <ItemGroup>
-    <PackageReference Include="Microsoft.SourceLink.GitHub" Version="1.1.1" PrivateAssets="all" />
-    <PackageReference Include="Nerdbank.GitVersioning" Version="3.5.108">
-      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
-      <PrivateAssets>all</PrivateAssets>
-    </PackageReference>
+    <PackageReference Include="Microsoft.SourceLink.GitHub" Version="$(MicrosoftSourceLinkGitHubVersion)" PrivateAssets="all" />
   </ItemGroup>
 
 </Project>
diff --git a/src/xunit.assert/xunit.assert.csproj b/src/xunit.assert/xunit.assert.csproj
index 40e37a96..29a41b43 100644
--- a/src/xunit.assert/xunit.assert.csproj
+++ b/src/xunit.assert/xunit.assert.csproj
@@ -4,18 +4,7 @@
     <DefineConstants>$(DefineConstants);XUNIT_NULLABLE</DefineConstants>
     <GenerateDocumentationFile>true</GenerateDocumentationFile>
     <Nullable>enable</Nullable>
-    <TargetFramework>netstandard1.1</TargetFramework>
+    <TargetFramework>netstandard2.0</TargetFramework>
   </PropertyGroup>
 
-  <ItemGroup>
-    <PackageReference Include="TunnelVisionLabs.ReferenceAssemblyAnnotator" Version="1.0.0-alpha.160">
-      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
-      <PrivateAssets>all</PrivateAssets>
-    </PackageReference>
-  </ItemGroup>
-
-  <ItemGroup>
-    <PackageDownload Include="Microsoft.NETCore.App.Ref" Version="[5.0.0]" />
-  </ItemGroup>
-
 </Project>
diff --git a/src/xunit.core/xunit.core.csproj b/src/xunit.core/xunit.core.csproj
index acbc33ca..499a7721 100644
--- a/src/xunit.core/xunit.core.csproj
+++ b/src/xunit.core/xunit.core.csproj
@@ -3,7 +3,8 @@
   <PropertyGroup>
     <DefineConstants>$(DefineConstants);XUNIT_FRAMEWORK</DefineConstants>
     <GenerateDocumentationFile>true</GenerateDocumentationFile>
-    <TargetFramework>netstandard1.1</TargetFramework>
+    <Packable>true</Packable>
+    <TargetFramework>netstandard2.0</TargetFramework>
   </PropertyGroup>
 
   <ItemGroup>
diff --git a/src/xunit.execution/xunit.execution.csproj b/src/xunit.execution/xunit.execution.csproj
index 43174d1f..f0594aa9 100644
--- a/src/xunit.execution/xunit.execution.csproj
+++ b/src/xunit.execution/xunit.execution.csproj
@@ -6,7 +6,7 @@
     <DefineConstants>$(DefineConstants);XUNIT_FRAMEWORK</DefineConstants>
     <GenerateDocumentationFile>true</GenerateDocumentationFile>
     <RootNamespace>Xunit.Sdk</RootNamespace>
-    <TargetFrameworks>net452;netstandard1.1</TargetFrameworks>
+    <TargetFrameworks>netstandard2.0</TargetFrameworks>
   </PropertyGroup>
 
   <ItemGroup>
diff --git a/src/xunit.runner.assemblies/xunit.runner.assemblies.csproj b/src/xunit.runner.assemblies/xunit.runner.assemblies.csproj
index 5ca7d4c9..8f530055 100644
--- a/src/xunit.runner.assemblies/xunit.runner.assemblies.csproj
+++ b/src/xunit.runner.assemblies/xunit.runner.assemblies.csproj
@@ -3,7 +3,7 @@
   <PropertyGroup>
     <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
     <RootNamespace>Xunit</RootNamespace>
-    <TargetFrameworks>net452;netcoreapp1.0;netcoreapp2.0</TargetFrameworks>
+    <TargetFrameworks>netcoreapp2.0</TargetFrameworks>
   </PropertyGroup>
 
   <ItemGroup>
diff --git a/src/xunit.runner.utility/xunit.runner.utility.csproj b/src/xunit.runner.utility/xunit.runner.utility.csproj
index 5f0cb1a8..d3eda758 100644
--- a/src/xunit.runner.utility/xunit.runner.utility.csproj
+++ b/src/xunit.runner.utility/xunit.runner.utility.csproj
@@ -1,4 +1,4 @@
-﻿<Project Sdk="MSBuild.Sdk.Extras">
+﻿<Project Sdk="Microsoft.NET.SDK">
 
   <PropertyGroup>
     <AssemblyName Condition=" '$(TargetFramework)' == 'net35' ">xunit.runner.utility.net35</AssemblyName>
@@ -10,7 +10,8 @@
     <DefineConstants Condition=" '$(TargetFramework)' == 'uap10.0' ">$(DefineConstants);WINDOWS_UAP</DefineConstants>
     <GenerateDocumentationFile>true</GenerateDocumentationFile>
     <RootNamespace>Xunit</RootNamespace>
-    <TargetFrameworks>net35;net452;netstandard1.1;netstandard1.5;netcoreapp1.0;uap10.0</TargetFrameworks>
+    <Packable>true</Packable>
+    <TargetFrameworks>netstandard2.0</TargetFrameworks>
   </PropertyGroup>
 
   <ItemGroup>
diff --git a/xunit-notests.slnf b/xunit-notests.slnf
new file mode 100644
index 00000000..4101bb16
--- /dev/null
+++ b/xunit-notests.slnf
@@ -0,0 +1,9 @@
+{
+  "solution": {
+    "path": "xunit.sln",
+    "projects": [
+      "src\\xunit.core\\xunit.core.csproj",
+      "src\\xunit.runner.utility\\xunit.runner.utility.csproj",
+    ]
+  }
+}
\ No newline at end of file
-- 
2.41.0.windows.1

